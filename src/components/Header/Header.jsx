import React, { useContext } from 'react';
import styles from './Header.module.css';
import authContext from '../../context/authContext';

function Header() {
  const { setIsLogged } = useContext(authContext);
  const username = sessionStorage.getItem('username');

  const handleLogout = () => {
    sessionStorage.removeItem('username');
    sessionStorage.removeItem('token');
    setIsLogged(false);
  };

  return (
    <header className={styles.root}>
      <div className={styles.header}>
        <h1 className={styles.logo}>Short Link</h1>
        <div className={styles.userInfo}>
          <span>{username}</span>
          <button type="button" onClick={handleLogout}>
            <svg
              className={styles.svgLogout}
              width="26"
              height="24"
              viewBox="0 0 26 24"
              fill="black"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path d="M12.25 0.621103C11.8492 0.703134 11.5328 0.876572 11.2305 1.18126C10.9961 1.41798 10.8602 1.6336 10.7641 1.92188C10.6797 2.17501 10.6562 2.35782 10.6562 2.7586V3.1172H16.1758C20.1461 3.1172 21.7281 3.12423 21.8172 3.14298C22.2086 3.22501 22.5227 3.54142 22.607 3.93282C22.6445 4.11095 22.6445 19.8891 22.607 20.0672C22.5227 20.4586 22.2063 20.775 21.8172 20.857C21.7281 20.8758 20.1461 20.8828 16.1758 20.8828H10.6562V21.2391C10.6562 21.6422 10.6797 21.825 10.7641 22.0781C10.8602 22.3641 10.9961 22.5797 11.2305 22.8188C11.5422 23.1328 11.882 23.3133 12.3063 23.3883C12.4023 23.407 14.1977 23.4141 17.9148 23.4141C23.9359 23.4141 23.5281 23.4234 23.9219 23.2711C24.1727 23.175 24.3719 23.0367 24.6016 22.8047C24.8969 22.507 25.0727 22.1602 25.1383 21.75C25.1734 21.5367 25.1734 2.46329 25.1383 2.25001C25.0094 1.43438 24.3672 0.77579 23.5516 0.618759C23.3031 0.571884 12.4867 0.574228 12.25 0.621103Z" />
              <path d="M11.6524 6.01404C11.5492 6.04686 11.4696 6.11483 10.975 6.60467C10.3516 7.22576 10.3047 7.28904 10.3047 7.53514C10.3047 7.62186 10.3235 7.71326 10.3492 7.77186C10.3797 7.83748 10.8274 8.30389 11.8633 9.34217L13.3352 10.8164L7.30237 10.8281L1.26956 10.8398L1.17346 10.8914C1.04221 10.9617 0.894557 11.1328 0.861744 11.2547C0.84065 11.3273 0.835963 11.5898 0.84065 12.1523C0.847682 12.9211 0.850025 12.9515 0.899244 13.0453C0.957838 13.1578 1.09378 13.282 1.20159 13.3265C1.26721 13.3547 2.2469 13.3594 7.30471 13.3594C10.6164 13.3594 13.3282 13.3664 13.3282 13.3758C13.3282 13.3851 12.6696 14.0531 11.8633 14.8594C10.743 15.982 10.3891 16.35 10.3539 16.4297C10.2907 16.5703 10.2907 16.7812 10.3539 16.9219C10.4219 17.0719 11.418 18.0726 11.5797 18.1523C11.7297 18.2273 11.9477 18.232 12.093 18.164C12.1657 18.1289 12.9438 17.3648 14.9477 15.3586C17.6664 12.6351 17.7039 12.5953 17.7789 12.4265C17.8492 12.2719 17.8563 12.239 17.8492 12.075C17.8375 11.8476 17.7672 11.6976 17.561 11.4586C17.4789 11.3625 16.2414 10.118 14.8141 8.69061C12.9789 6.86014 12.1844 6.08436 12.1117 6.04686C11.9782 5.97889 11.8 5.96717 11.6524 6.01404Z" />
            </svg>
          </button>
        </div>
      </div>
    </header>
  );
}

export default Header;
